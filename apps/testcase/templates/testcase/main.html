{% extends 'nav.html' %}
{% load static %}

{% block head %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.4/themes/redmond/jquery-ui.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<!-- <link rel="stylesheet" href="{% static "/jqgrid/css/ui.jqgrid.min.css" %}">
<script src="{% static "/jqgrid/jquery.jqgrid.min.js" %}"></script>
<script src="{% static "/jqgrid/jquery.jqgrid.min.js" %}"></script>
 -->


{% endblock %}


{% block contents %}
<div class="container-fluid" style="height:100%;">

	<div class="be-left-sidebar">
		<ul class="sidebar-elements">
			<li>
				<a><h3>Services</h3></a>
			</li>
			{% for service in testcases %}
			<li>
				<a href="/testcase?service={{service.service_id}}">
					{{service.service_name}}
				</a>
			</li>
			{% endfor %}
		</ul>
	</div>
}
	<div class="be-content">
		<div class="row" id="testcases" style="height:92vh;">
			<div class="col-5" id="list">
				<div class="card card-table" style="height: 100%;">
					<div class="container-fluid" style="height:100%;">
						<div class="row" >
							<div class="col">
								<h3>Testcases</h3>
							</div>
							</div>
							<span class="table-filter-title">Category</span>
							<div class="row" id="select-form" style="margin-bottom: 10px;">
								<div class="col">
									<label>Module</label>
									<select id="module_select" class="form-control form-control-xs" onchange="module_change(this.value)">
										{% for module in service.module_set.all %}
										<option value="{{ module.module_id }}">{{ module.module_name }}</option>
										{% endfor %}
									</select>
								</div>
								<div class="col">
									<label>Function</label>
									<select id="function_select" class="form-control form-control-xs" onchange="function_change()"> 
										{% for function in module.function_set.all %}
										<option value="{{ function.function_id }}">{{ function.function_name }}</option>
										{% endfor %}
									</select>
								</div>
							</div>
							<span class="table-filter-title">Search</span>
							<div class="row" id="search-form">
								<div class="col-9">
									<div class="input-group">
										<input class="form-control form-control-xs" type="text" placeholder="Search..">
										<div class="input-group-append">
											<button class="btn btn-grey" type="button">검색</button>
										</div>
									</div>
								</div>
								<div class="col-3">
									<label class="custom-control custom-checkbox">
									<input class="custom-control-input" type="checkbox" checked="">
										<span class="custom-control-label custom-control-color">미 진행 Testcase</span>
									</label>  
								</div>
							</div>
							<div class="row" id="testcases" style="margin-top:10px;">
								<div class="col">
									<div id="testcases_wrapper" class="dataTables_wrapper dt-bootstrap4" style="height:100%;">
										<div class="row be-datatable-body" style="height:100%;">
											<div class="col-sm-12" style="height:100%;padding:0;">
												<div class="col-sm-12" style="height:100%;padding:0;">
													<table class="table table-striped table-hover be-table-responsive dataTable no-footer" 
														id="testcases" role="grid" aria-describedby="Testcases">
														<thead>
															<tr role="row">
																<th style="width: 96px;" class="sorting_desc" tabindex="0" aria-controls="testcases" rowspan="1" colspan="1">
																	<div class="custom-control custom-control-sm custom-checkbox">
																		<input class="custom-control-input"	type="checkbox" id="check5">
																		<label class="custom-control-label" for="check5"></label>
																	</div>
																</th>
																<th style="width: 300px;" class="sorting" tabindex="0" aria-controls="testcases" rowspan="1" colspan="1">
																	Testcase ID
																</th>
																<th style="width: 800px;" class="sorting" tabindex="0" aria-controls="testcases" rowspan="1" colspan="1">
																	Testcase
																</th>
																<th style="width: 100px;" class="sorting" tabindex="0" aria-controls="testcases" rowspan="1" colspan="1">
																	Priority
																</th>
																<th style="width: 100px;" class="sorting" tabindex="0" aria-controls="testcases" rowspan="1" colspan="1">
																	Auto/Reg.
																</th>
																<th style="width: 250px;" class="sorting" tabindex="0" aria-controls="testcases" rowspan="1" colspan="1">
																	Updated
																</th>
															</tr>
														</thead>
														<tbody>
															<tr class="odd" role="row">
																<td class="sorting_1">
																	<div class="custom-control custom-control-sm custom-checkbox">
																		<input class="custom-control-input" type="checkbox" id="check1">
																		<label class="custom-control-label" for="check1"></label>
																	</div>
																</td>
																<td class="cell-detail">
																	<span>TC_ID_#</span>
																	<span class="cell-detail-description">ver : 1</span>
																</td>
																<td class="cell-detail" data-project="Bootstrap">
																	<span>Testcase summary</span>
																</td>
																<td class="milestone" data-progress="0,45">
																	<span>P1</span>
																</td>
																<td class="cell-detail">
																	<span>O / X</span>
																</td>
																<td class="cell-detail">
																	<span class="date">2021-03-21</span>
																</td>
															</tr>
															<tr class="even" role="row">
																<td class="sorting_1">
																	<div class="custom-control custom-control-sm custom-checkbox">
																		<input class="custom-control-input" type="checkbox" id="check1">
																		<label class="custom-control-label" for="check1"></label>
																	</div>
																</td>
																<td class="cell-detail">
																	<span>TC_ID_#</span>
																	<span class="cell-detail-description">ver : 1</span>
																</td>
																<td class="cell-detail" data-project="Bootstrap">
																	<span>Testcase summary</span>
																</td>
																<td class="milestone" data-progress="0,45">
																	<span>P1</span>
																</td>
																<td class="cell-detail">
																	<span>O / X</span>
																</td>
																<td class="cell-detail">
																	<span class="date">2021-03-21</span>
																</td>
															</tr>
															<tr class="odd" role="row">
																<td class="sorting_1">
																	<div class="custom-control custom-control-sm custom-checkbox">
																		<input class="custom-control-input" type="checkbox" id="check1">
																		<label class="custom-control-label" for="check1"></label>
																	</div>
																</td>
																<td class="cell-detail">
																	<span>TC_ID_#</span>
																	<span class="cell-detail-description">ver : 1</span>
																</td>
																<td class="cell-detail" data-project="Bootstrap">
																	<span>Testcase summary</span>
																</td>
																<td class="milestone" data-progress="0,45">
																	<span>P1</span>
																</td>
																<td class="cell-detail">
																	<span>O / X</span>
																</td>
																<td class="cell-detail">
																	<span class="date">2021-03-21</span>
																</td>
															</tr>
															<tr class="even" role="row">
																<td class="sorting_1">
																	<div class="custom-control custom-control-sm custom-checkbox">
																		<input class="custom-control-input" type="checkbox" id="check1">
																		<label class="custom-control-label" for="check1"></label>
																	</div>
																</td>
																<td class="cell-detail">
																	<span>TC_ID_#</span>
																	<span class="cell-detail-description">ver : 1</span>
																</td>
																<td class="cell-detail" data-project="Bootstrap">
																	<span>Testcase summary</span>
																</td>
																<td class="milestone" data-progress="0,45">
																	<span>P1</span>
																</td>
																<td class="cell-detail">
																	<span>O / X</span>
																</td>
																<td class="cell-detail">
																	<span class="date">2021-03-21</span>
																</td>
															</tr>
															<tr class="odd" role="row">
																<td class="sorting_1">
																	<div class="custom-control custom-control-sm custom-checkbox">
																		<input class="custom-control-input" type="checkbox" id="check1">
																		<label class="custom-control-label" for="check1"></label>
																	</div>
																</td>
																<td class="cell-detail">
																	<span>TC_ID_#</span>
																	<span class="cell-detail-description">ver : 1</span>
																</td>
																<td class="cell-detail" data-project="Bootstrap">
																	<span>Testcase summary</span>
																</td>
																<td class="milestone" data-progress="0,45">
																	<span>P1</span>
																</td>
																<td class="cell-detail">
																	<span>O / X</span>
																</td>
																<td class="cell-detail">
																	<span class="date">2021-03-21</span>
																</td>
															</tr>
															<tr class="even" role="row">
																<td class="sorting_1">
																	<div class="custom-control custom-control-sm custom-checkbox">
																		<input class="custom-control-input" type="checkbox" id="check1">
																		<label class="custom-control-label" for="check1"></label>
																	</div>
																</td>
																<td class="cell-detail">
																	<span>TC_ID_#</span>
																	<span class="cell-detail-description">ver : 1</span>
																</td>
																<td class="cell-detail" data-project="Bootstrap">
																	<span>Testcase summary</span>
																</td>
																<td class="milestone" data-progress="0,45">
																	<span>P1</span>
																</td>
																<td class="cell-detail">
																	<span>O / X</span>
																</td>
																<td class="cell-detail">
																	<span class="date">2021-03-21</span>
																</td>
															</tr>
															<tr class="odd" role="row">
																<td class="sorting_1">
																	<div class="custom-control custom-control-sm custom-checkbox">
																		<input class="custom-control-input" type="checkbox" id="check1">
																		<label class="custom-control-label" for="check1"></label>
																	</div>
																</td>
																<td class="cell-detail">
																	<span>TC_ID_#</span>
																	<span class="cell-detail-description">ver : 1</span>
																</td>
																<td class="cell-detail" data-project="Bootstrap">
																	<span>Testcase summary</span>
																</td>
																<td class="milestone" data-progress="0,45">
																	<span>P1</span>
																</td>
																<td class="cell-detail">
																	<span>O / X</span>
																</td>
																<td class="cell-detail">
																	<span class="date">2021-03-21</span>
																</td>
															</tr>
															<tr class="even" role="row">
																<td class="sorting_1">
																	<div class="custom-control custom-control-sm custom-checkbox">
																		<input class="custom-control-input" type="checkbox" id="check1">
																		<label class="custom-control-label" for="check1"></label>
																	</div>
																</td>
																<td class="cell-detail">
																	<span>TC_ID_#</span>
																	<span class="cell-detail-description">ver : 1</span>
																</td>
																<td class="cell-detail" data-project="Bootstrap">
																	<span>Testcase summary</span>
																</td>
																<td class="milestone" data-progress="0,45">
																	<span>P1</span>
																</td>
																<td class="cell-detail">
																	<span>O / X</span>
																</td>
																<td class="cell-detail">
																	<span class="date">2021-03-21</span>
																</td>
															</tr>
															<tr class="odd" role="row">
																<td class="sorting_1">
																	<div class="custom-control custom-control-sm custom-checkbox">
																		<input class="custom-control-input" type="checkbox" id="check1">
																		<label class="custom-control-label" for="check1"></label>
																	</div>
																</td>
																<td class="cell-detail">
																	<span>TC_ID_#</span>
																	<span class="cell-detail-description">ver : 1</span>
																</td>
																<td class="cell-detail" data-project="Bootstrap">
																	<span>Testcase summary</span>
																</td>
																<td class="milestone" data-progress="0,45">
																	<span>P1</span>
																</td>
																<td class="cell-detail">
																	<span>O / X</span>
																</td>
																<td class="cell-detail">
																	<span class="date">2021-03-21</span>
																</td>
															</tr>
															<tr class="even" role="row">
																<td class="sorting_1">
																	<div class="custom-control custom-control-sm custom-checkbox">
																		<input class="custom-control-input" type="checkbox" id="check1">
																		<label class="custom-control-label" for="check1"></label>
																	</div>
																</td>
																<td class="cell-detail">
																	<span>TC_ID_#</span>
																	<span class="cell-detail-description">ver : 1</span>
																</td>
																<td class="cell-detail" data-project="Bootstrap">
																	<span>Testcase summary</span>
																</td>
																<td class="milestone" data-progress="0,45">
																	<span>P1</span>
																</td>
																<td class="cell-detail">
																	<span>O / X</span>
																</td>
																<td class="cell-detail">
																	<span class="date">2021-03-21</span>
																</td>
															</tr>
															<tr class="odd" role="row">
																<td class="sorting_1">
																	<div class="custom-control custom-control-sm custom-checkbox">
																		<input class="custom-control-input" type="checkbox" id="check1">
																		<label class="custom-control-label" for="check1"></label>
																	</div>
																</td>
																<td class="cell-detail">
																	<span>TC_ID_#</span>
																	<span class="cell-detail-description">ver : 1</span>
																</td>
																<td class="cell-detail" data-project="Bootstrap">
																	<span>Testcase summary</span>
																</td>
																<td class="milestone" data-progress="0,45">
																	<span>P1</span>
																</td>
																<td class="cell-detail">
																	<span>O / X</span>
																</td>
																<td class="cell-detail">
																	<span class="date">2021-03-21</span>
																</td>
															</tr>
															<tr class="even" role="row">
																<td class="sorting_1">
																	<div class="custom-control custom-control-sm custom-checkbox">
																		<input class="custom-control-input" type="checkbox" id="check1">
																		<label class="custom-control-label" for="check1"></label>
																	</div>
																</td>
																<td class="cell-detail">
																	<span>TC_ID_#</span>
																	<span class="cell-detail-description">ver : 1</span>
																</td>
																<td class="cell-detail" data-project="Bootstrap">
																	<span>Testcase summary</span>
																</td>
																<td class="milestone" data-progress="0,45">
																	<span>P1</span>
																</td>
																<td class="cell-detail">
																	<span>O / X</span>
																</td>
																<td class="cell-detail">
																	<span class="date">2021-03-21</span>
																</td>
															</tr>
														</tbody>
													</table>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="row be-datatable-footer" style="margin-top:-80px; height:80px;">
							<div class="col-sm-5">
								<div class="dataTables_info" id="testcases_info" role="status" aria-live="polite">
									Showing 1 to 5 of 10 entries
								</div>
							</div>
							<div class="col-sm-7">
								<div class="dataTables_paginate paging_simple_numbers" id="testcases_paginate">
									<ul class="pagination">
										<li class="paginate_button page-item previous disabled" id="testcases_previous">
											<a href="#" aria-controls="testcases" data-dt-idx="0" tabindex="0" class="page-link">Previous</a>
										</li>
										<li class="paginate_button page-item active">
											<a href="#" aria-controls="testcases" data-dt-idx="1" tabindex="0" class="page-link">1</a>
										</li>
										<li class="paginate_button page-item ">
											<a href="#" aria-controls="testcases" data-dt-idx="2" tabindex="0" class="page-link">2</a>
										</li>
										<li class="paginate_button page-item next" id="testcases_next">
											<a href="#" aria-controls="testcases" data-dt-idx="3" tabindex="0" class="page-link">Next</a>
										</li>
									</ul>
								</div>
							</div>
						</div>
					</div>
				</div>
				
				<div class="col" id="content">
					<div class="card overflow-auto" style="height: 1200px;">
						<div class="card-header">TC_ID_#</div>
						<div class="card-body overflow-auto" style="overflow: scroll;" >
							<div class="card" style="height: 200px;background-color:lightgrey;">
								<p>Lorem ipsum dolor sit amet,</p>
							</div>
							<div class="icon container text-center" style="margin-top:-10px;">
									<span>▼</span>
							</div>
							<div class="card" style="height: 200px;background-color:lightgrey;">
								<p>Lorem ipsum dolor sit amet,</p>
							</div>
							<div class="icon container text-center" style="margin-top:-10px;">
									<span>▼</span>
							</div>
							<div class="card" style="height: 200px;background-color:lightgrey;">
								<p>Lorem ipsum dolor sit amet,</p>
							</div>
							<div class="icon container text-center" style="margin-top:-10px;">
									<span>▼</span>
							</div>
							<div class="card" style="height: 200px;background-color:lightgrey;">
								<p>Lorem ipsum dolor sit amet,</p>
							</div>
							<div class="icon container text-center" style="margin-top:-10px;">
									<span>▼</span>
							</div>
							<div class="card" style="height: 200px;background-color:lightgrey;">
								<p>Lorem ipsum dolor sit amet,</p>
							</div>
							<div class="icon container text-center" style="margin-top:-10px;">
									<span>▼</span>
							</div>
							<div class="card" style="height: 200px;background-color:lightgrey;">
								<p>Lorem ipsum dolor sit amet,</p>
							</div>
							<div class="icon container text-center" style="margin-top:-10px;">
									<span>▼</span>
							</div>
							<div class="card" style="height: 200px;background-color:lightgrey;">
								<p>Lorem ipsum dolor sit amet,</p>
							</div>
							<div class="icon container text-center" style="margin-top:-10px;">
									<span>▼</span>
							</div>
							<div class="card" style="height: 200px;background-color:lightgrey;">
								<p>Lorem ipsum dolor sit amet,</p>
							</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<script>
	function module_change(module_id) {
		
		console.log(module_id);
		var $function_list = $("#function_select");
		console.log($function_list);

		$function_list.empty();
		if (module_id == "") {
			function_list.append("<option value=''>--</option>");
			return;
		} 
		$.ajax({
			type: "POST",
			url: "functions",
			async: false,
			data: {module_id:module_id},
			dataType: "json",
			success: function(jdata){
				if (jdata.data.length == 0) {
					$function_list.append("<option value=''>--</option>");
				} else {
					$(jdata.data).each(function(i) {
						$function_list.append("<option value='"+jdata.data[i].function_id+"'>"+jdata.data[i].function_name+"</option>");
					});
				}
			},
			error: function(xhr) {
				console.log(xhr.responseText);
				alert("Get function list error");
				return;
			}
		});
	}
	

	
</script>

{% endblock %}